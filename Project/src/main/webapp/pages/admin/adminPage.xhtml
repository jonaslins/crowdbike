<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/template/template.xhtml">
	
	<ui:define name="header">
		<ui:include src="/util/header.xhtml" />
	</ui:define>
	
	<ui:define name="mainMenu">
		<ui:include src="/util/menu.xhtml" />
	</ui:define>
	
	<ui:define name="content">
	<h:form id="form">           
	    <p:growl id="message" showDetail="true" />
 	    <p:accordionPanel multiple="true">
 	    
 	     	<p:tab title="Admin Info">
 	        	<h:outputLabel for="username" value="Username: " />    		
	        	<h:outputText id="username" value="#{userbean.user.username}"/>	        	
	        </p:tab>
	        
	        <p:tab title="User Management">
	            <h:panelGrid>
	                <p:dataTable id="singleDT" var="user" value="#{userbean.users}" selectionMode="single" selection="#{userbean.selectedUser}" rowKey="#{user.id}"
	                	paginator="true" rows="10">
				        <p:column headerText="Id">
				            <h:outputText value="#{user.id}" />
				        </p:column>
				        <p:column headerText="Username">
				            <h:outputText value="#{user.username}" />
				        </p:column>
				        <f:facet name="footer">
				        	<p:growl id="message" showDetail="true" />
				            <p:commandButton icon="ui-icon-plus" value="New user" />
				            <p:spacer width="1" height="22" style="position: relative; bottom: -5px;background-color: #A8A8A8; margin-left: 10px;margin-right: 10px" />				         
				            <p:commandButton value="Details" icon="ui-icon-search"/>
				            <p:commandButton value="Remove" icon="ui-icon-close" actionListener="#{userbean.deleteUser(user)}" update="message">
						        
						        <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
						    </p:commandButton>	
				        </f:facet>
				    </p:dataTable>
			    	
	            </h:panelGrid>
	            
	        </p:tab>
	         
	    </p:accordionPanel>
	    
	    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
	        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
	        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
    	</p:confirmDialog>
    	
    </h:form>
	</ui:define>
	
	<ui:define name="footer">
		<ui:include src="/util/footer.xhtml" />
	</ui:define>
	
</ui:composition>